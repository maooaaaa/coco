<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeStation | ä¸‡èƒ½ãƒ„ãƒ¼ãƒ«å›³é‘‘</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root {
            --primary: #6366f1; --bg: #f3f4f6; --sidebar: #ffffff; --text: #1f2937;
        }
        * { box-sizing: border-box; outline: none; }
        body { margin: 0; font-family: 'Helvetica Neue', Arial, sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }
        
        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar { width: 240px; background: var(--sidebar); display: flex; flex-direction: column; border-right: 1px solid #e5e7eb; padding: 20px 0; flex-shrink: 0; overflow-y: auto; }
        .logo { font-size: 22px; font-weight: bold; text-align: center; margin-bottom: 20px; color: var(--primary); }
        .menu-item { padding: 12px 20px; cursor: pointer; color: #4b5563; font-weight: 500; display: flex; align-items: center; gap: 10px; transition: 0.2s; }
        .menu-item:hover, .menu-item.active { background: #e0e7ff; color: var(--primary); border-right: 3px solid var(--primary); }
        
        /* ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ */
        .main { flex: 1; display: flex; flex-direction: column; height: 100vh; }
        .header { height: 60px; background: white; border-bottom: 1px solid #e5e7eb; display: flex; align-items: center; padding: 0 30px; justify-content: space-between; }
        .search-box { width: 300px; padding: 8px 15px; border-radius: 20px; border: 1px solid #d1d5db; background: #f9fafb; }
        
        .content { padding: 30px; overflow-y: auto; flex: 1; }
        
        /* ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ */
        .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .tool-card { 
            background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
            cursor: pointer; transition: 0.2s; border: 1px solid transparent; display: flex; flex-direction: column; gap: 10px;
        }
        .tool-card:hover { transform: translateY(-3px); box-shadow: 0 10px 15px rgba(0,0,0,0.1); border-color: var(--primary); }
        .card-icon { font-size: 24px; color: var(--primary); background: #e0e7ff; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; border-radius: 10px; }
        .card-title { font-weight: bold; font-size: 16px; }
        .card-desc { font-size: 13px; color: #6b7280; line-height: 1.4; }

        /* å€‹åˆ¥ãƒ„ãƒ¼ãƒ«ç”»é¢ */
        .tool-view { display: none; background: white; padding: 30px; border-radius: 15px; max-width: 800px; margin: 0 auto; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .tool-view.active { display: block; animation: fadeIn 0.3s; }
        .back-btn { margin-bottom: 20px; cursor: pointer; color: #6b7280; display: inline-flex; align-items: center; gap: 5px; }
        .back-btn:hover { color: var(--primary); }
        
        /* ãƒ•ã‚©ãƒ¼ãƒ éƒ¨å“ */
        input, select, textarea { width: 100%; padding: 12px; border: 1px solid #d1d5db; border-radius: 8px; margin-bottom: 15px; font-size: 16px; }
        button.action-btn { background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.2s; }
        button.action-btn:hover { opacity: 0.9; }
        .result-area { background: #f8fafc; padding: 20px; border-radius: 8px; margin-top: 20px; border: 1px solid #e2e8f0; font-size: 18px; font-weight: bold; text-align: center; color: #333; word-break: break-all; }
        
        /* ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: auto; flex-direction: row; overflow-x: auto; padding: 10px; }
            .menu-item { white-space: nowrap; border-right: none; border-bottom: 3px solid transparent; }
            .content { padding: 15px; }
        }
        @keyframes fadeIn { from{opacity:0;transform:translateY(10px);} to{opacity:1;transform:translateY(0);} }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="logo">ğŸ§¬ LifeStation</div>
        <div class="menu-item active" onclick="filterCategory('all')"><i class="fas fa-th"></i> ã™ã¹ã¦</div>
        <div class="menu-item" onclick="filterCategory('calc')"><i class="fas fa-calculator"></i> è¨ˆç®—ãƒ»ãŠé‡‘</div>
        <div class="menu-item" onclick="filterCategory('date')"><i class="fas fa-calendar-alt"></i> æ—¥ä»˜ãƒ»æ™‚é–“</div>
        <div class="menu-item" onclick="filterCategory('text')"><i class="fas fa-font"></i> æ–‡å­—ãƒ»å¤‰æ›</div>
        <div class="menu-item" onclick="filterCategory('life')"><i class="fas fa-coffee"></i> ç”Ÿæ´»ãƒ»ä¾¿åˆ©</div>
        <div class="menu-item" onclick="filterCategory('random')"><i class="fas fa-dice"></i> é‹ãƒ»ãƒ©ãƒ³ãƒ€ãƒ </div>
    </nav>

    <div class="main">
        <header class="header">
            <h3 id="page-title" style="margin:0;">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h3>
            <input type="text" class="search-box" placeholder="ãƒ„ãƒ¼ãƒ«ã‚’æ¤œç´¢ (ä¾‹: å‰²ã‚Šå‹˜, QR)..." oninput="searchTools(this.value)">
        </header>

        <div class="content">
            <div id="grid-container" class="grid-container"></div>
            
            <div id="tool-stage"></div>
        </div>
    </div>

    <script>
        // --- ãƒ„ãƒ¼ãƒ«å®šç¾© (ã“ã“ã‚’å¢—ã‚„ã™ã ã‘ã§æ©Ÿèƒ½ãŒå¢—ãˆã‚‹) ---
        const tools = [
            // â–  è¨ˆç®—ãƒ»ãŠé‡‘
            { id: 'discount', cat: 'calc', icon: 'fa-tags', title: 'å‰²å¼•è¨ˆç®—æ©Ÿ', desc: 'ã€Œ3å‰²å¼•ã€ã€Œ20%OFFã€ãªã©ã‚’ç¬æ™‚ã«è¨ˆç®—ã—ã¾ã™ã€‚', 
              html: `<div style="display:flex; gap:10px;"><input type="number" id="dc_price" placeholder="å…ƒã®ä¾¡æ ¼ (å††)"><input type="number" id="dc_percent" placeholder="å‰²å¼•ç‡ (%)"></div><button class="action-btn" onclick="runDiscount()">è¨ˆç®—ã™ã‚‹</button>` },
            
            { id: 'warikan', cat: 'calc', icon: 'fa-users', title: 'ã‚¹ãƒãƒ¼ãƒˆå‰²ã‚Šå‹˜', desc: 'äººæ•°ã¨é‡‘é¡ã‹ã‚‰ä¸€äººã‚ãŸã‚Šã®æ”¯æ‰•ã„é¡ã‚’è¨ˆç®—ã€‚ç«¯æ•°å‡¦ç†ã‚‚å¯¾å¿œã€‚',
              html: `<input type="number" id="wk_price" placeholder="åˆè¨ˆé‡‘é¡ (å††)"><input type="number" id="wk_ppl" placeholder="äººæ•° (äºº)"><select id="wk_mode"><option value="1">1å††å˜ä½</option><option value="100">100å††å˜ä½(å¤šã‚ã«é›†ã‚ã‚‹)</option></select><button class="action-btn" onclick="runWarikan()">è¨ˆç®—ã™ã‚‹</button>` },
            
            { id: 'tax', cat: 'calc', icon: 'fa-shopping-cart', title: 'æ¶ˆè²»ç¨è¨ˆç®—', desc: 'ç¨æŠœãƒ»ç¨è¾¼ã‚’ç›¸äº’ã«å¤‰æ›ã—ã¾ã™ã€‚è»½æ¸›ç¨ç‡(8%)å¯¾å¿œã€‚',
              html: `<input type="number" id="tx_val" placeholder="é‡‘é¡ã‚’å…¥åŠ›"><div style="display:flex; gap:10px; margin-bottom:15px;"><button class="action-btn" style="background:#64748b" onclick="runTax(1.1)">ç¨è¾¼(10%)ã«ã™ã‚‹</button><button class="action-btn" style="background:#64748b" onclick="runTax(1.08)">ç¨è¾¼(8%)ã«ã™ã‚‹</button></div><button class="action-btn" onclick="runTaxRev(1.1)">ç¨è¾¼ã‹ã‚‰ç¨æŠœã‚’å‡ºã™(10%)</button>` },

            { id: 'bmi', cat: 'calc', icon: 'fa-weight', title: 'BMIè¨ˆç®—æ©Ÿ', desc: 'èº«é•·ã¨ä½“é‡ã‹ã‚‰è‚¥æº€åº¦ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚',
              html: `<input type="number" id="bmi_h" placeholder="èº«é•· (cm)"><input type="number" id="bmi_w" placeholder="ä½“é‡ (kg)"><button class="action-btn" onclick="runBMI()">åˆ¤å®šã™ã‚‹</button>` },

            // â–  æ—¥ä»˜ãƒ»æ™‚é–“
            { id: 'age', cat: 'date', icon: 'fa-birthday-cake', title: 'å¹´é½¢ãƒ»æ—¥æ•°è¨ˆç®—', desc: 'ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ç¾åœ¨ã®å¹´é½¢ã€ç”Ÿã¾ã‚Œã¦ã‹ã‚‰ã®æ—¥æ•°ã‚’è¨ˆç®—ã€‚',
              html: `<input type="date" id="age_birth"><button class="action-btn" onclick="runAge()">è¨ˆç®—ã™ã‚‹</button>` },
            
            { id: 'era', cat: 'date', icon: 'fa-torii-gate', title: 'è¥¿æš¦ãƒ»å’Œæš¦å¤‰æ›', desc: '1990å¹´ã¯å¹³æˆä½•å¹´ï¼Ÿã‚’ä¸€ç™ºå¤‰æ›ã€‚',
              html: `<input type="number" id="era_year" placeholder="è¥¿æš¦ (ä¾‹: 2024)"><button class="action-btn" onclick="runEra()">å’Œæš¦ã«å¤‰æ›</button>` },

            { id: 'stopwatch', cat: 'date', icon: 'fa-stopwatch', title: 'ã‚¹ãƒˆãƒƒãƒ—ã‚¦ã‚©ãƒƒãƒ', desc: 'ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¹ãƒˆãƒƒãƒ—ã‚¦ã‚©ãƒƒãƒã€‚ãƒ©ãƒƒãƒ—æ©Ÿèƒ½ãªã—ã®ç¡¬æ´¾ä»•æ§˜ã€‚',
              html: `<div id="sw_disp" style="font-size:40px; text-align:center; margin:20px; font-family:monospace;">00:00:00</div><button class="action-btn" onclick="toggleSW()" id="sw_btn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>` },

            // â–  æ–‡å­—ãƒ»å¤‰æ›
            { id: 'count', cat: 'text', icon: 'fa-file-alt', title: 'æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼', desc: 'ãƒ¬ãƒãƒ¼ãƒˆã‚„SNSæŠ•ç¨¿ç”¨ã«ã€‚ç©ºç™½ç„¡è¦–ã‚«ã‚¦ãƒ³ãƒˆã‚‚ã€‚',
              html: `<textarea id="cnt_txt" rows="5" placeholder="ã“ã“ã«å…¥åŠ›" oninput="runCount()"></textarea>` },

            { id: 'pass', cat: 'text', icon: 'fa-key', title: 'å¼·åŠ›ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ', desc: 'ãƒ©ãƒ³ãƒ€ãƒ ã§å®‰å…¨ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½œã‚Šã¾ã™ã€‚',
              html: `<select id="ps_len"><option value="8">8æ–‡å­—</option><option value="12" selected>12æ–‡å­—</option><option value="16">16æ–‡å­—</option><option value="32">32æ–‡å­— (æœ€å¼·)</option></select><button class="action-btn" onclick="runPass()">ç”Ÿæˆã™ã‚‹</button>` },

            { id: 'qr', cat: 'text', icon: 'fa-qrcode', title: 'QRã‚³ãƒ¼ãƒ‰ä½œæˆ', desc: 'URLã‚„ãƒ†ã‚­ã‚¹ãƒˆã‚’QRã‚³ãƒ¼ãƒ‰ç”»åƒã«å¤‰æ›ã—ã¾ã™ã€‚',
              html: `<input type="text" id="qr_txt" placeholder="URLãªã©ã‚’å…¥åŠ›"><button class="action-btn" onclick="runQR()">QRã‚³ãƒ¼ãƒ‰ä½œæˆ</button><div id="qr_area" style="margin-top:20px; display:flex; justify-content:center;"></div>` },
              
            { id: 'case', cat: 'text', icon: 'fa-font', title: 'å¤§æ–‡å­—ãƒ»å°æ–‡å­—å¤‰æ›', desc: 'è‹±èªã®ã€ŒHELLOã€â‡”ã€Œhelloã€ã‚’ä¸€æ‹¬å¤‰æ›ã€‚',
              html: `<textarea id="case_txt" rows="3" placeholder="è‹±èªã‚’å…¥åŠ›"></textarea><div style="display:flex; gap:10px;"><button class="action-btn" onclick="runCase('upper')">å…¨ã¦å¤§æ–‡å­—</button><button class="action-btn" onclick="runCase('lower')">å…¨ã¦å°æ–‡å­—</button></div>` },

            // â–  ç”Ÿæ´»ãƒ»ä¾¿åˆ©
            { id: 'loan', cat: 'life', icon: 'fa-home', title: 'ç°¡æ˜“ãƒ­ãƒ¼ãƒ³è¨ˆç®—', desc: 'å€Ÿå…¥é¡ã¨é‡‘åˆ©ã‹ã‚‰æœˆã€…ã®æ”¯æ‰•é¡ã‚’æ¦‚ç®—ã—ã¾ã™ã€‚',
              html: `<input type="number" id="ln_amount" placeholder="å€Ÿå…¥é¡ (ä¸‡å††)"><input type="number" id="ln_rate" placeholder="å¹´åˆ© (%)"><input type="number" id="ln_year" placeholder="è¿”æ¸ˆæœŸé–“ (å¹´)"><button class="action-btn" onclick="runLoan()">è¨ˆç®—ã™ã‚‹</button>` },

            { id: 'unit', cat: 'life', icon: 'fa-ruler-combined', title: 'å˜ä½å¤‰æ› (ç°¡æ˜“ç‰ˆ)', desc: 'ãƒ¡ãƒ¼ãƒˆãƒ«ã€ã‚¤ãƒ³ãƒã€å°ºãªã©ã‚’å¤‰æ›ã€‚',
              html: `<input type="number" id="un_val" placeholder="æ•°å€¤ã‚’å…¥åŠ› (ãƒ¡ãƒ¼ãƒˆãƒ«åŸºæº–)"><button class="action-btn" onclick="runUnit()">å¤‰æ›çµæœã‚’è¡¨ç¤º</button>` },

            { id: 'search', cat: 'life', icon: 'fa-search-plus', title: 'Google/Twitterä¸€æ‹¬æ¤œç´¢', desc: 'å…¥åŠ›ã—ãŸè¨€è‘‰ã‚’è¤‡æ•°ã®ã‚µã‚¤ãƒˆã§åŒæ™‚ã«æ¤œç´¢ã‚¿ãƒ–ã‚’é–‹ãã¾ã™ã€‚',
              html: `<input type="text" id="mul_key" placeholder="æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰"><button class="action-btn" onclick="runMultiSearch()">Googleã¨Xã¨YouTubeã§æ¤œç´¢</button>` },

            // â–  é‹ãƒ»ãƒ©ãƒ³ãƒ€ãƒ 
            { id: 'dice', cat: 'random', icon: 'fa-dice-five', title: 'ã‚µã‚¤ã‚³ãƒ­', desc: '1ã€œ6ã®ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚Šã¾ã™ã€‚TRPGã‚„ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ã«ã€‚',
              html: `<button class="action-btn" onclick="runDice()" style="height:100px; font-size:24px;">ã‚µã‚¤ã‚³ãƒ­ã‚’æŒ¯ã‚‹</button>` },

            { id: 'roulette', cat: 'random', icon: 'fa-bullseye', title: 'è¿·ã£ãŸæ™‚ã®ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ', desc: 'é¸æŠè‚¢ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰ã‹ã‚‰1ã¤ã‚’é¸ã³ã¾ã™ã€‚ãƒ©ãƒ³ãƒæ±ºã‚ã«ã€‚',
              html: `<textarea id="rl_list" placeholder="ãƒ©ãƒ¼ãƒ¡ãƒ³, ã‚«ãƒ¬ãƒ¼, å¯¿å¸, ãƒãƒ³ãƒãƒ¼ã‚°"></textarea><button class="action-btn" onclick="runRoulette()">æ±ºã‚ã¦ã‚‚ã‚‰ã†ï¼</button>` },
              
            { id: 'omikuji', cat: 'random', icon: 'fa-star', title: 'ç°¡æ˜“ãŠã¿ãã˜', desc: 'ä»Šæ—¥ã®é‹å‹¢ã‚’å ã„ã¾ã™ã€‚',
              html: `<button class="action-btn" onclick="runOmikuji()">ãŠã¿ãã˜ã‚’å¼•ã</button>` },
        ];

        // --- åˆæœŸè¡¨ç¤ºå‡¦ç† ---
        const grid = document.getElementById('grid-container');
        const stage = document.getElementById('tool-stage');
        
        function renderGrid(filterCat = 'all', keyword = '') {
            grid.innerHTML = '';
            stage.innerHTML = ''; // ã‚¯ãƒªã‚¢
            grid.style.display = 'grid'; // ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤ºã«æˆ»ã™
            
            tools.forEach(tool => {
                if ((filterCat === 'all' || tool.cat === filterCat) && 
                    (keyword === '' || tool.title.includes(keyword) || tool.desc.includes(keyword))) {
                    
                    const card = document.createElement('div');
                    card.className = 'tool-card';
                    card.innerHTML = `
                        <div class="card-icon"><i class="fas ${tool.icon}"></i></div>
                        <div class="card-title">${tool.title}</div>
                        <div class="card-desc">${tool.desc}</div>
                    `;
                    card.onclick = () => openTool(tool);
                    grid.appendChild(card);
                }
            });
        }
        
        function openTool(tool) {
            grid.style.display = 'none';
            stage.innerHTML = `
                <div class="tool-view active">
                    <div class="back-btn" onclick="renderGrid()"><i class="fas fa-arrow-left"></i> ä¸€è¦§ã«æˆ»ã‚‹</div>
                    <h2><i class="fas ${tool.icon}" style="color:var(--primary)"></i> ${tool.title}</h2>
                    <p>${tool.desc}</p>
                    <hr style="border:0; border-top:1px solid #eee; margin:20px 0;">
                    ${tool.html}
                    <div id="result" class="result-area" style="display:none;"></div>
                </div>
            `;
            document.getElementById('page-title').innerText = tool.title;
        }

        // --- ã‚«ãƒ†ã‚´ãƒªãƒ»æ¤œç´¢ ---
        function filterCategory(cat) {
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');
            renderGrid(cat);
        }
        function searchTools(val) { renderGrid('all', val); }

        // --- æ±ç”¨: çµæœè¡¨ç¤ºãƒ˜ãƒ«ãƒ‘ãƒ¼ ---
        function showRes(text) {
            const el = document.getElementById('result');
            el.style.display = 'block';
            el.innerHTML = text;
        }

        // ============================
        // â–  å„ãƒ„ãƒ¼ãƒ«ã®ãƒ­ã‚¸ãƒƒã‚¯ (ã“ã“ãŒè„³ã¿ã)
        // ============================

        // å‰²å¼•è¨ˆç®—
        function runDiscount() {
            const p = Number(document.getElementById('dc_price').value);
            const r = Number(document.getElementById('dc_percent').value);
            showRes(`${p}å†† ã® ${r}% OFF ã¯...<br><span style="font-size:32px; color:red;">${Math.floor(p * (1 - r/100))} å††</span> ã§ã™`);
        }
        // å‰²ã‚Šå‹˜
        function runWarikan() {
            const p = Number(document.getElementById('wk_price').value);
            const n = Number(document.getElementById('wk_ppl').value);
            const unit = Number(document.getElementById('wk_mode').value);
            if(!n) return;
            const res = Math.ceil(p / n / unit) * unit;
            const surplus = (res * n) - p;
            showRes(`ä¸€äººå½“ãŸã‚Š: <span style="font-size:32px; color:blue;">${res} å††</span><br>(ä½™ã‚Š: ${surplus}å††)`);
        }
        // ç¨è¨ˆç®—
        function runTax(rate) {
            const v = Number(document.getElementById('tx_val').value);
            showRes(`ç¨è¾¼: ${Math.floor(v * rate)} å††`);
        }
        function runTaxRev(rate) {
            const v = Number(document.getElementById('tx_val').value);
            showRes(`ç¨æŠœ: ${Math.floor(v / rate)} å††`);
        }
        // BMI
        function runBMI() {
            const h = Number(document.getElementById('bmi_h').value) / 100;
            const w = Number(document.getElementById('bmi_w').value);
            const bmi = w / (h*h);
            let msg = bmi < 18.5 ? "ä½ä½“é‡" : bmi < 25 ? "æ™®é€šä½“é‡" : "è‚¥æº€";
            showRes(`BMI: ${bmi.toFixed(1)} (${msg})`);
        }
        // å¹´é½¢
        function runAge() {
            const b = new Date(document.getElementById('age_birth').value);
            const today = new Date();
            const age = today.getFullYear() - b.getFullYear();
            const diff = Math.floor((today - b) / 86400000);
            showRes(`${age}æ­³ (ç”Ÿã¾ã‚Œã¦ã‹ã‚‰ ${diff}æ—¥)`);
        }
        // å…ƒå·
        function runEra() {
            const y = Number(document.getElementById('era_year').value);
            if(y >= 2019) showRes(`ä»¤å’Œ ${y - 2018} å¹´`);
            else if(y >= 1989) showRes(`å¹³æˆ ${y - 1988} å¹´`);
            else if(y >= 1926) showRes(`æ˜­å’Œ ${y - 1925} å¹´`);
            else showRes("æ˜æ²»ãƒ»å¤§æ­£ã€ã¾ãŸã¯ãã‚Œä»¥å‰");
        }
        // ã‚¹ãƒˆãƒƒãƒ—ã‚¦ã‚©ãƒƒãƒ
        let swT = null, swS = 0;
        function toggleSW() {
            const btn = document.getElementById('sw_btn');
            if(swT) { clearInterval(swT); swT = null; btn.innerText = "å†é–‹"; }
            else {
                btn.innerText = "ã‚¹ãƒˆãƒƒãƒ—";
                swT = setInterval(() => {
                    swS++;
                    const h = String(Math.floor(swS/3600)).padStart(2,'0');
                    const m = String(Math.floor((swS%3600)/60)).padStart(2,'0');
                    const s = String(swS%60).padStart(2,'0');
                    document.getElementById('sw_disp').innerText = `${h}:${m}:${s}`;
                }, 1000);
            }
        }
        // æ–‡å­—æ•°
        function runCount() {
            const t = document.getElementById('cnt_txt').value;
            showRes(`æ–‡å­—æ•°: ${t.length} <br> ç©ºç™½ãªã—: ${t.replace(/\s/g,'').length}`);
        }
        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
        function runPass() {
            const len = Number(document.getElementById('ps_len').value);
            const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";
            let p = "";
            for(let i=0; i<len; i++) p += chars.charAt(Math.floor(Math.random()*chars.length));
            showRes(p);
        }
        // QRã‚³ãƒ¼ãƒ‰
        function runQR() {
            const area = document.getElementById('qr_area');
            area.innerHTML = "";
            new QRCode(area, document.getElementById('qr_txt').value);
            showRes("ç”Ÿæˆã—ã¾ã—ãŸ");
        }
        // å¤§æ–‡å­—å°æ–‡å­—
        function runCase(mode) {
            const t = document.getElementById('case_txt').value;
            showRes(mode==='upper' ? t.toUpperCase() : t.toLowerCase());
        }
        // ãƒ­ãƒ¼ãƒ³
        function runLoan() {
            const p = Number(document.getElementById('ln_amount').value) * 10000;
            const r = Number(document.getElementById('ln_rate').value) / 100 / 12;
            const n = Number(document.getElementById('ln_year').value) * 12;
            const pay = (p * r * Math.pow(1+r, n)) / (Math.pow(1+r, n) - 1);
            showRes(`æœˆã€…: ${Math.floor(pay).toLocaleString()} å††`);
        }
        // å˜ä½
        function runUnit() {
            const v = Number(document.getElementById('un_val').value);
            showRes(`${v}m = ${(v*100).toFixed(1)}cm = ${(v*3.28).toFixed(2)}ft = ${(v*39.37).toFixed(2)}inch`);
        }
        // ä¸€æ‹¬æ¤œç´¢
        function runMultiSearch() {
            const k = document.getElementById('mul_key').value;
            window.open(`https://www.google.com/search?q=${k}`);
            window.open(`https://twitter.com/search?q=${k}`);
            window.open(`https://www.youtube.com/results?search_query=${k}`);
        }
        // ã‚µã‚¤ã‚³ãƒ­
        function runDice() {
            const d = Math.floor(Math.random() * 6) + 1;
            showRes(`<i class="fas fa-dice-${['one','two','three','four','five','six'][d-1]}" style="font-size:60px"></i><br>${d}`);
        }
        // ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ
        function runRoulette() {
            const l = document.getElementById('rl_list').value.split(',').map(s=>s.trim()).filter(s=>s);
            if(!l.length) return;
            const r = l[Math.floor(Math.random() * l.length)];
            showRes(`é‹å‘½ã®é¸æŠã¯...<br><span style="font-size:32px; color:#e11d48;">${r}</span> ã§ã™ï¼`);
        }
        // ãŠã¿ãã˜
        function runOmikuji() {
            const r = ["å¤§å‰","ä¸­å‰","å°å‰","å‰","æœ«å‰","å‡¶"];
            showRes(r[Math.floor(Math.random()*r.length)]);
        }

        // åˆæœŸåŒ–
        renderGrid();
    </script>
</body>
</html>
