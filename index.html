<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«BOX</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --bg-color: #f3f4f6;
            --sidebar-width: 250px;
        }
        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            background-color: var(--bg-color);
            color: #333;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰ */
        .sidebar {
            width: var(--sidebar-width);
            background-color: #1f2937;
            color: white;
            display: flex;
            flex-direction: column;
            padding: 20px 0;
            flex-shrink: 0;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 30px;
            color: #60a5fa;
        }
        .menu-btn {
            background: none;
            border: none;
            color: #d1d5db;
            padding: 15px 25px;
            text-align: left;
            cursor: pointer;
            font-size: 16px;
            transition: 0.2s;
        }
        .menu-btn:hover, .menu-btn.active {
            background-color: #374151;
            color: white;
            border-left: 4px solid var(--primary-color);
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .main-content {
            flex-grow: 1;
            padding: 40px;
            overflow-y: auto;
        }
        .tool-section {
            display: none; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯éè¡¨ç¤º */
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            max-width: 800px;
            margin: 0 auto;
        }
        .tool-section.active {
            display: block; /* é¸æŠã•ã‚ŒãŸã‚‰è¡¨ç¤º */
            animation: fadeIn 0.3s ease;
        }
        h2 { border-bottom: 2px solid #f3f4f6; padding-bottom: 10px; margin-top: 0; }
        
        /* å„ãƒ„ãƒ¼ãƒ«ã®æ±ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        textarea, input, select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }
        .result-box {
            background-color: #eef2ff;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-weight: bold;
            color: #1e3a8a;
        }
        button.action-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button.action-btn:hover { opacity: 0.9; }

        /* é›»å“å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .calc-btn {
            padding: 15px; background: #f3f4f6; border: none; border-radius: 5px; font-size: 18px; cursor: pointer;
        }
        .calc-btn.operator { background: #dbeafe; color: var(--primary-color); }
        .calc-btn.equal { background: var(--primary-color); color: white; grid-column: span 2; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 600px) {
            body { flex-direction: column; }
            .sidebar { width: 100%; height: auto; padding: 10px 0; flex-direction: row; overflow-x: auto; }
            .menu-btn { padding: 10px; white-space: nowrap; border-left: none; border-bottom: 4px solid transparent; }
            .menu-btn:hover, .menu-btn.active { border-bottom: 4px solid var(--primary-color); border-left: none; }
            .main-content { padding: 20px; }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="logo">ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«BOX</div>
        <button class="menu-btn active" onclick="showTool('char-count')">æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ</button>
        <button class="menu-btn" onclick="showTool('calculator')">é›»å“</button>
        <button class="menu-btn" onclick="showTool('unit-conv')">å˜ä½å¤‰æ›</button>
        <button class="menu-btn" onclick="showTool('kanji-search')">æ¼¢å­—æ¤œç´¢</button>
    </div>

    <div class="main-content">
        
        <div id="char-count" class="tool-section active">
            <h2>ğŸ“ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ</h2>
            <p>ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã™ã‚‹ã¨ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚</p>
            <textarea id="textInput" rows="10" placeholder="ã“ã“ã«æ–‡ç« ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
            <div class="result-box">
                æ–‡å­—æ•°: <span id="countResult">0</span> æ–‡å­— (ç©ºç™½é™¤ã: <span id="countResultNoSpace">0</span>)
                <br>è¡Œæ•°: <span id="lineCount">0</span> è¡Œ
            </div>
        </div>

        <div id="calculator" class="tool-section">
            <h2>ğŸ§® é›»å“</h2>
            <input type="text" id="calcDisplay" readonly style="text-align: right; font-size: 24px;">
            <div class="calc-grid">
                <button class="calc-btn" onclick="appendCalc('7')">7</button>
                <button class="calc-btn" onclick="appendCalc('8')">8</button>
                <button class="calc-btn" onclick="appendCalc('9')">9</button>
                <button class="calc-btn operator" onclick="appendCalc('/')">Ã·</button>
                <button class="calc-btn" onclick="appendCalc('4')">4</button>
                <button class="calc-btn" onclick="appendCalc('5')">5</button>
                <button class="calc-btn" onclick="appendCalc('6')">6</button>
                <button class="calc-btn operator" onclick="appendCalc('*')">Ã—</button>
                <button class="calc-btn" onclick="appendCalc('1')">1</button>
                <button class="calc-btn" onclick="appendCalc('2')">2</button>
                <button class="calc-btn" onclick="appendCalc('3')">3</button>
                <button class="calc-btn operator" onclick="appendCalc('-')">-</button>
                <button class="calc-btn" onclick="appendCalc('0')">0</button>
                <button class="calc-btn" onclick="appendCalc('.')">.</button>
                <button class="calc-btn" onclick="clearCalc()">C</button>
                <button class="calc-btn operator" onclick="appendCalc('+')">+</button>
                <button class="calc-btn equal" onclick="calculate()">=</button>
            </div>
        </div>

        <div id="unit-conv" class="tool-section">
            <h2>ğŸ“ å˜ä½å¤‰æ› (é•·ã•)</h2>
            <div style="display: flex; gap: 10px; align-items: center;">
                <input type="number" id="unitInput" placeholder="æ•°å€¤ã‚’å…¥åŠ›" oninput="convertUnit()">
                <select id="unitFrom" onchange="convertUnit()">
                    <option value="1000">km</option>
                    <option value="1" selected>m</option>
                    <option value="0.01">cm</option>
                    <option value="0.001">mm</option>
                </select>
                <span>â†’</span>
                <select id="unitTo" onchange="convertUnit()">
                    <option value="1000">km</option>
                    <option value="1">m</option>
                    <option value="0.01" selected>cm</option>
                    <option value="0.001">mm</option>
                </select>
            </div>
            <div class="result-box" id="unitResult">çµæœ: ---</div>
        </div>

        <div id="kanji-search" class="tool-section">
            <h2>dictionary æ¼¢å­—æ¤œç´¢</h2>
            <p>æ¼¢å­—ä¸€æ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (ä¾‹: æ—…)</p>
            <input type="text" id="kanjiInput" maxlength="1" placeholder="æ¼¢å­—ã‚’å…¥åŠ›">
            <button class="action-btn" onclick="searchKanji()">æ¤œç´¢</button>
            <div class="result-box" id="kanjiResult" style="display: none;">
                </div>
        </div>

    </div>

    <script>
        // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ ---
        function showTool(toolId) {
            // ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã‚’éè¡¨ç¤º
            document.querySelectorAll('.tool-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.menu-btn').forEach(el => el.classList.remove('active'));
            
            // æŒ‡å®šã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã‚’è¡¨ç¤º
            document.getElementById(toolId).classList.add('active');
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–ï¼ˆç°¡æ˜“çš„ãªå®Ÿè£…ï¼‰
            event.target.classList.add('active');
        }

        // --- 1. æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆæ©Ÿèƒ½ ---
        document.getElementById('textInput').addEventListener('input', function(e) {
            const text = e.target.value;
            document.getElementById('countResult').textContent = text.length;
            document.getElementById('countResultNoSpace').textContent = text.replace(/\s+/g, '').length;
            document.getElementById('lineCount').textContent = text.split('\n').length;
        });

        // --- 2. é›»å“æ©Ÿèƒ½ ---
        function appendCalc(val) { document.getElementById('calcDisplay').value += val; }
        function clearCalc() { document.getElementById('calcDisplay').value = ''; }
        function calculate() {
            try {
                const result = eval(document.getElementById('calcDisplay').value);
                document.getElementById('calcDisplay').value = result;
            } catch (e) {
                alert('è¨ˆç®—å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“');
            }
        }

        // --- 3. å˜ä½å¤‰æ›æ©Ÿèƒ½ ---
        function convertUnit() {
            const val = parseFloat(document.getElementById('unitInput').value);
            const from = parseFloat(document.getElementById('unitFrom').value);
            const to = parseFloat(document.getElementById('unitTo').value);
            
            if (isNaN(val)) {
                document.getElementById('unitResult').textContent = "çµæœ: ---";
                return;
            }
            
            // ãƒ¡ãƒ¼ãƒˆãƒ«ã‚’åŸºæº–ã«å¤‰æ›
            const meterVal = val * from;
            const result = meterVal / to;
            document.getElementById('unitResult').textContent = `çµæœ: ${result}`;
        }

        // --- 4. æ¼¢å­—æ¤œç´¢æ©Ÿèƒ½ (kanjiapi.dev APIã‚’ä½¿ç”¨) ---
        async function searchKanji() {
            const char = document.getElementById('kanjiInput').value;
            const resultBox = document.getElementById('kanjiResult');
            
            if (!char) return;

            resultBox.style.display = 'block';
            resultBox.textContent = "æ¤œç´¢ä¸­...";

            try {
                // å…¬é–‹APIã‚’ä½¿ç”¨
                const response = await fetch(`https://kanjiapi.dev/v1/kanji/${char}`);
                if (!response.ok) throw new Error("è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ");
                
                const data = await response.json();
                
                resultBox.innerHTML = `
                    <h3>${data.kanji} (ç”»æ•°: ${data.stroke_count})</h3>
                    <p><strong>èª­ã¿(éŸ³):</strong> ${data.on_readings.join(', ')}</p>
                    <p><strong>èª­ã¿(è¨“):</strong> ${data.kun_readings.join(', ')}</p>
                    <p><strong>æ„å‘³:</strong> ${data.meanings.join(', ')}</p>
                `;
            } catch (error) {
                resultBox.textContent = "ã‚¨ãƒ©ãƒ¼: æ¼¢å­—ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‹ã€é€šä¿¡ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚";
            }
        }
    </script>
</body>
</html>
